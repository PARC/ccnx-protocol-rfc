<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>CCNx Publisher Clock Time Versioning</title>

  
<style type="text/css">/*<![CDATA[*/
@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}

@media screen and (min-width: 1024px) {
  body>ul.toc, body>#rfc\.toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 550px);
    width: 300px;
    z-index: 1;
  }
  #rfc\.toc {
    top: 55px;
    overflow: auto;
    overscroll-behavior: contain;
  }
  ul.toc, #rfc\.toc {
    overflow: auto;
    overscroll-behavior: contain;
  }
  body>ul.toc {
    top: 140px;
  }

  body {
    padding-right: 350px;
  }
}

body {
  font: 16px "Helvetica Neue",Helvetica,Arial,sans-serif;
  color: #333;
  font-size-adjust: 0.5;
  line-height: 24px;
  margin: 75px auto;
  max-width: 724px;
}

.title, .filename, h1, h2, h3, h4 {
  font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size-adjust: 0.5;
  font-weight: 500;
  color: #333;
  line-height: 100%;
  margin: 0.8em 0 0.3em;
}
.title { font-size: 36px; }
h1 { font-size: 36px; }
h2 { font-size: 24px; }
h3, h4 { font-size: 18px; }
h1 a[href], h2 a[href], h3 a[href], h4 a[href] {
  color: #333;
}

ul.toc li {
  list-style: none;
  text-indent: -2.5em;
  padding-left: 2.5em;
  padding-bottom: 5px;
  margin: 0;
}
ul.toc ul {
  margin: 0;
}
/* xml2rfc nests ul directly inside ul which messes with the style badly */
ul.toc, ul.toc>ul, ul.toc ul>ul {
  margin: 0 0 0 1.5em;
}

table {
  margin-left: 0em;
  border-collapse: collapse;
}
th {
  text-align: left;
  border-bottom: 2px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
  vertical-align: top;
}
tr:nth-child(2n+1) > td,
tr:nth-child(2n+1) > th {
  background-color: #f9f9f9;
}
td.reference {
  max-width: 200px;
  border-top: none;
  padding-right: 1em;
}
.right {
  text-align: right;
}


table.header {
  width: 100%;
}
table.header td {
  border: none;
  background-color: transparent;
  color: black;
}
.filename {
  color: rgb(119, 119, 119);
  font-size: 23px;
  font-weight: normal;
  height: auto;
  line-height: 100%;
}
#rfc\.abstract+p, #rfc\.abstract p {
  font-size: 18px;
  line-height: 27px%;
}

samp, tt, code, pre {
  font: 11pt consolas, monospace;
  font-size-adjust: none;
}
pre {
  background-color: #eee;
  border: 1px solid #ddd;
  overflow-x: auto;
  padding: 5px;
  margin: 5px;
}
.figure {
  font-style: italic;
  margin: 0 1.5em;
}

address {
  margin: 10px 0 0;
}
.vcard {
  font-style: normal;
}
.vcardline {
  display: block;
}
.vcardline .fn {
  font-weight: bold;
}
.vcardline .hidden {
  display: none;
}

dl {
  margin-left: 1em;
}
dl.dl-horizontal: {
  margin-left: 0;
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl.nohang > dt {
  float: none;
}
dl > dd {
  margin-bottom: .5em;
}
dl.compact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}

hr {
  border: 0;
  border-top: 1px solid #eee;
}
hr.noprint {
  display: none;
}

a {
  text-decoration: none;
}
a[href] {
  color: #2a6496;
}
a[href]:hover {
  background-color: #eee;
}

ol, ul, li, p {
  padding: 0;
  margin: 0.5em 0 0.5em 2em;
}
li, p {
  margin-left: 0;
}
address {
  font-style: normal;
}

.github-fork-ribbon-wrapper {
  display: none;
}
@media screen and (min-width: 800px) {
  /* "Fork me on GitHub" CSS ribbon based on
   * https://github.com/simonwhitaker/github-fork-ribbon-css
   */
  .github-fork-ribbon {
    position: absolute;
    padding: 2px 0;
    background-color: #a00;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
    font: 700 12px "Helvetica Neue", Helvetica, Arial, sans-serif;

    pointer-events: auto;

    top: 38px;
    right: -45px;

    transform: rotate(45deg);
  }

  .github-fork-ribbon a[href],
  .github-fork-ribbon a[href]:hover {
    color: #fff;
    background-color: transparent;
    text-decoration: none;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    text-align: center;

    width: 190px;
    line-height: 18px;

    display: inline-block;
    padding: 2px 0;

    border: 1.5px dotted #fff;
    border-color: rgba(255, 255, 255, 0.6);
  }

  .github-fork-ribbon-wrapper {
    display: block;
    width: 130px;
    height: 130px;
    position: absolute;
    overflow: hidden;
    top: 0; right: 0;
    z-index: 2;
    pointer-events: none;
  }
}
@media screen and (min-width: 1000px) {
  .github-fork-ribbon-wrapper {
    position: fixed;
  }
/*]]>*/</style>


  <link href="#rfc.toc" rel="Contents"/>
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction"/>
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Requirements Language"/>
<link href="#rfc.section.2" rel="Chapter" title="2 Protocol Description"/>
<link href="#rfc.section.3" rel="Chapter" title="3 Comparing timestamps"/>
<link href="#rfc.section.4" rel="Chapter" title="4 Acknowledgements"/>
<link href="#rfc.section.5" rel="Chapter" title="5 IANA Considerations"/>
<link href="#rfc.section.6" rel="Chapter" title="6 Security Considerations"/>
<link href="#rfc.references" rel="Chapter" title="7 References"/>
<link href="#rfc.references.1" rel="Chapter" title="7.1 Normative References"/>
<link href="#rfc.references.2" rel="Chapter" title="7.2 Informative References"/>
<link href="#rfc.authors" rel="Chapter"/>


  <meta name="generator" content="xml2rfc version 2.5.1 - http://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Mosko, M." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-mosko-icnrg-ccnxtimeversion-02" />
  <meta name="dct.issued" scheme="ISO8601" content="2018-5-3" />
  <meta name="dct.abstract" content="This document specifies the use of a timestamp as a name segment in a CCNx Name as a versioning specifier.  It defines the name segment label, encoding, and semantics.   " />
  <meta name="description" content="This document specifies the use of a timestamp as a name segment in a CCNx Name as a versioning specifier.  It defines the name segment label, encoding, and semantics.   " />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
  <td class="left">ICNRG</td>
  <td class="right">M. Mosko</td>
</tr>
<tr>
  <td class="left">Internet-Draft</td>
  <td class="right">PARC</td>
</tr>
<tr>
  <td class="left">Intended status: Experimental</td>
  <td class="right">May 3, 2018</td>
</tr>
<tr>
  <td class="left">Expires: November 4, 2018</td>
  <td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">CCNx Publisher Clock Time Versioning<br />
  <span class="filename">draft-mosko-icnrg-ccnxtimeversion-02</span></p>
  
  <h1 id="rfc.abstract">
  <a href="#rfc.abstract">Abstract</a>
</h1>
<p>This document specifies the use of a timestamp as a name segment in a CCNx Name as a versioning specifier.  It defines the name segment label, encoding, and semantics.   </p>
<h1 id="rfc.status">
  <a href="#rfc.status">Status of This Memo</a>
</h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on November 4, 2018.</p>
<h1 id="rfc.copyrightnotice">
  <a href="#rfc.copyrightnotice">Copyright Notice</a>
</h1>
<p>Copyright (c) 2018 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a></li>
<ul><li>1.1.   <a href="#rfc.section.1.1">Requirements Language</a></li>
</ul><li>2.   <a href="#rfc.section.2">Protocol Description</a></li>
<li>3.   <a href="#rfc.section.3">Comparing timestamps</a></li>
<li>4.   <a href="#rfc.section.4">Acknowledgements</a></li>
<li>5.   <a href="#rfc.section.5">IANA Considerations</a></li>
<li>6.   <a href="#rfc.section.6">Security Considerations</a></li>
<li>7.   <a href="#rfc.references">References</a></li>
<ul><li>7.1.   <a href="#rfc.references.1">Normative References</a></li>
<li>7.2.   <a href="#rfc.references.2">Informative References</a></li>
</ul><li><a href="#rfc.authors">Author's Address</a></li>


  </ul>

  <h1 id="rfc.section.1"><a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">This document specifies the use of a subset of <a href="#RFC3339">RFC 3339</a> <cite title="NONE">[RFC3339]</cite> UTC timestamp in a CCNx Name as a version identifier.  We restrict the use of RFC 3339 to only using UTC time with the 'Z' notation, not relative offsets from UTC.</p>
<p id="rfc.section.1.p.2">This document updates <a href="#CCNMessages">CCNx Messages in TLV Format</a> <cite title="NONE">[CCNMessages]</cite>.  It introduces a new CCNx Name Segment TLV type.</p>
<h1 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a> Requirements Language</h1>
<p id="rfc.section.1.1.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a> <a href="#protocol" id="protocol">Protocol Description</a></h1>
<p id="rfc.section.2.p.1">A timestamp in a CCNx Name name segment indicates an ordering on names based on the UTC timestamp.  The timestamp is encoded as an RFC3339 UTC string in the 'date-time' format, for example "1985-04-12T23:20:50.52Z". This format allows a memcmp() of two strings to determine their time ordering (see <a href="#Comparing">Section 3</a>). </p>
<p id="rfc.section.2.p.2">The timestamp MUST use the format of RFC 3339 Sections 5.6-5.7 with the restriction that it MUST use the 'Z' UTC signifier and MUST NOT use the 'time-numoffset' format.</p>
<p id="rfc.section.2.p.3">The timestamp MAY have fractions of a second, as per RFC3339.  The fractions MUST use the '.' separator, as specified in RFC 3339 Section 5.6.  This restriction is to ensure that memcmp() ordering is maintained.</p>
<p id="rfc.section.2.p.4">The use of a timestamp in a Name to denote a version SHOULD NOT assume global time coordination and SHOULD NOT be used to denote ordering or causation between multiple publishers.</p>
<p id="rfc.section.2.p.5">If multiple publishers -- with different clocks -- write to the same namespace, the name SHOULD include a name segment prior to the timestamp that indicates the publisher.  For example, one could include the publisher's KeyId, or any globally unique string between the publishers.</p>
<p id="rfc.section.2.p.6">A name segment timestamp MUST use the UTC 'Z' notation, not a '+' or '-' offset (the 'time-numoffset' token in RFC 3339).  This restriction is to ensure that timestamps may be ordered simply by a direct comparison (see <a href="#Comparing">Section 3</a>).</p>
<p id="rfc.section.2.p.7">An example Name using this format is "ccnx:/Name=parc/Name=file.pdf/Time=1985-04-12T23:20:50.52Z".</p>
<p id="rfc.section.2.p.8">A publisher assigns a timestamp to indicate the time ordering of the prior Name name segments.  It does not imply any specific temporal meaning such as the time of content creation or the time of Content Object signature.  It is simply used to order a set of objects.  An application MAY adopt such a semantic to the timestamp as an application-specific specification.</p>
<div id="rfc.table.1"/>
<div id="message_type"/>
<table cellpadding="3" cellspacing="0" class="tt full center">
  <caption>Name Segment Label</caption>
  <thead>
    <tr>
      <th class="center">Type</th>
      <th class="center">Name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="center">'Time'</td>
      <td class="center">UTC Timestamp, in RFC 3339 human-readable format.</td>
    </tr>
  </tbody>
</table>
<div id="rfc.table.2"/>
<div id="name_types"/>
<table cellpadding="3" cellspacing="0" class="tt full center">
  <caption>CCNx Name Types</caption>
  <thead>
    <tr>
      <th class="center">Type</th>
      <th class="center">Symbol</th>
      <th class="center">Name</th>
      <th class="left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="center">%x0012</td>
      <td class="center">T_TIME</td>
      <td class="center">UTC Timestamp</td>
      <td class="left">UTC timestamp RFC 3339 'Z' format.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a> <a href="#Comparing" id="Comparing">Comparing timestamps</a></h1>
<p id="rfc.section.3.p.1">The TLV length of the timestamp MUST be at least 20 octets to be compliant with RFC 3339, and thus with this specification.</p>
<p id="rfc.section.3.p.2">As per RFC 3339, the string format for two timestamps MAY be compared via memcmp() up to the minimum string length minus 1 (to trim the terminal 'Z').  If the two timestamps are equal, up to the minimum length, then the shorter string is less than the longer string.  Because we require UTC time zone with the 'Z' notation, the only time two strings may be of different lengths is when one includes milliseconds, so the rule here is correct.</p>
<h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a></h1>
<h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a> <a href="#IANA" id="IANA">IANA Considerations</a></h1>
<p id="rfc.section.5.p.1">This memo includes no request to IANA.</p>
<p id="rfc.section.5.p.2">This draft introduces a new value in the CCNx Name Segment type registry.</p>
<h1 id="rfc.section.6"><a href="#rfc.section.6">6.</a> <a href="#Security" id="Security">Security Considerations</a></h1>
<p id="rfc.section.6.p.1">An entity parsing a T_TIME name segment is not required to parse the segment for validity in formatting to only compute ordering.  Because the format allows a direct memcmp() and the length of the string is available via the TLV length, there should be no vulnerability to mis-formatted values.  Other uses of the timestamp should ensure the format conforms to RFC 3339 'Z' format.</p>
<h1 id="rfc.references"><a href="#rfc.references">7.</a> References</h1>
<h1 id="rfc.references.1"><a href="#rfc.references.1">7.1.</a> Normative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="RFC2119">[RFC2119]</b>
      </td>
      <td class="top"><a>Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.references.2"><a href="#rfc.references.2">7.2.</a> Informative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="CCNMessages">[CCNMessages]</b>
      </td>
      <td class="top"><a title="PARC, Inc.">Mosko, M.</a>, <a title="PARC, Inc.">Solis, I.</a> and <a title="PARC, Inc.">C. Wood</a>, "<a href="http://tools.ietf.org/html/draft-irtf-icnrg-ccnxmessages-03">CCNx Messages in TLV Format (Internet draft)</a>", 2016.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="CCNx">[CCNx]</b>
      </td>
      <td class="top"><a>PARC, Inc.</a>, "<a href="http://www.ccnx.org">CCNx Open Source</a>", 2007.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC3339">[RFC3339]</b>
      </td>
      <td class="top"><a>Klyne, G.</a> and <a>C. Newman</a>, "<a href="http://tools.ietf.org/html/rfc3339">Date and Time on the Internet: Timestamps</a>", RFC 3339, DOI 10.17487/RFC3339, July 2002.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC3552">[RFC3552]</b>
      </td>
      <td class="top"><a>Rescorla, E.</a> and <a>B. Korver</a>, "<a href="http://tools.ietf.org/html/rfc3552">Guidelines for Writing RFC Text on Security Considerations</a>", BCP 72, RFC 3552, DOI 10.17487/RFC3552, July 2003.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC5226">[RFC5226]</b>
      </td>
      <td class="top"><a>Narten, T.</a> and <a>H. Alvestrand</a>, "<a href="http://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>", RFC 5226, DOI 10.17487/RFC5226, May 2008.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.authors">
  <a href="#rfc.authors">Author's Address</a>
</h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Marc Mosko</span> 
	  <span class="n hidden">
		<span class="family-name">Mosko</span>
	  </span>
	</span>
	<span class="org vcardline">PARC</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality">Palo Alto</span>,  
		<span class="region">California</span> 
		<span class="code">94304</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +01 650-812-4405</span>

<span class="vcardline">EMail: <a href="mailto:marc.mosko@parc.com">marc.mosko@parc.com</a></span>

  </address>
</div>

</body>
</html>
